!function(window){"use strict";function extend(a,b){for(var key in b)b.hasOwnProperty(key)&&(a[key]=b[key]);return a}function SliderFx(el,options){this.el=el,this.options=extend({},this.options),extend(this.options,options),this._init(),this._initEvents()}var Modernizr=window.Modernizr,transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},transEndEventName=transEndEventNames[Modernizr.prefixed("transition")],support={csstransitions:Modernizr.csstransitions};SliderFx.prototype.options={speed:500,easing:"ease",paths:{rect:"M33,0h41c0,0,0,9.871,0,29.871C74,49.871,74,60,74,60H32.666h-0.125H6c0,0,0-10,0-30S6,0,6,0H33",curve:{right:"M33,0h41c0,0,5,9.871,5,29.871C79,49.871,74,60,74,60H32.666h-0.125H6c0,0,5-10,5-30S6,0,6,0H33",left:"M33,0h41c0,0-5,9.871-5,29.871C69,49.871,74,60,74,60H32.666h-0.125H6c0,0-5-10-5-30S6,0,6,0H33"}}},SliderFx.prototype._init=function(){this.itemsList=this.el.querySelector("ul"),this.items=[].slice.call(this.itemsList.querySelectorAll("li")),this.itemsCount=this.items.length,this.curr=this.old=0,this.isAnimating=!1,this.itemsList.style.width=100*this.itemsCount+"%",support&&(this.itemsList.style.WebkitTransition="-webkit-transform "+this.options.speed+"ms "+this.options.easing,this.itemsList.style.transition="transform "+this.options.speed+"ms "+this.options.easing);var self=this;if(this.items.forEach(function(item){item.style.width=100/self.itemsCount+"%"}),this.itemsCount>1){var nav=document.createElement("nav"),addArrow=function(c,content,disabled){var el=document.createElement("span");return el.className=c,el.innerHTML=content,disabled&&classie.add(el,"disabled"),nav.appendChild(el),el},createSvg=function(html){var frag=document.createDocumentFragment(),temp=document.createElement("div");for(temp.innerHTML=html;temp.firstChild;)frag.appendChild(temp.firstChild);return frag};this.navPrev=addArrow("prev",'<i class="icon-angle-left"></i>',!0),this.navNext=addArrow("next",'<i class="icon-angle-right"></i>'),this.el.appendChild(nav),this.items.forEach(function(item){var maxHeight=$(window).height()-80,svg=createSvg('<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="'+maxHeight+'px" viewBox="0 0 80 60" preserveAspectRatio="none"><path d="'+self.options.paths.rect+'"/></svg>');item.insertBefore(svg,item.childNodes[0]);var s=Snap(item.querySelector("svg"));item.path=s.select("path")})}},SliderFx.prototype._initEvents=function(){var self=this;if(this.itemsCount>1){this.navPrev.addEventListener("click",function(){self._navigate("prev")}),this.navNext.addEventListener("click",function(){self._navigate("next")});var transitionendfn=function(){self.isAnimating=!1};support?self.itemsList.addEventListener(transEndEventName,transitionendfn):transitionendfn.call(),document.addEventListener("keydown",function(ev){var keyCode=ev.keyCode||ev.which;switch(keyCode){case 37:self._navigate("prev");break;case 39:self._navigate("next")}})}},SliderFx.prototype._navigate=function(dir){return this.isAnimating||"next"===dir&&this.curr>=this.itemsCount-1||"prev"===dir&&this.curr<=0?!1:(this.isAnimating=!0,this.direction=dir,this.old=this.curr,"next"===dir&&this.curr<this.itemsCount-1?++this.curr:"prev"===dir&&this.curr>0&&--this.curr,void this._slide())},SliderFx.prototype._slide=function(){var self=this,startSlider=function(){self._toggleNavControls();var translateVal=-1*self.curr*100/self.itemsCount;self.itemsList.style.WebkitTransform="translate3d("+translateVal+"%,0,0)",self.itemsList.style.transform="translate3d("+translateVal+"%,0,0)"};this._morphSVGs(startSlider)},SliderFx.prototype._morphSVGs=function(callback){var speed=this.options.speed,pathCurvedLeft=this.options.paths.curve.left,pathCurvedRight=this.options.paths.curve.right,pathRectangle=this.options.paths.rect,dir=this.old<this.curr?"right":"left";this.items[this.old].path.stop().animate({path:"right"===dir?pathCurvedLeft:pathCurvedRight},.5*speed,mina.easeout),setTimeout(function(){callback.call()},.2*speed);var currItem=this.items[this.curr];currItem.querySelector("path").setAttribute("d","right"===dir?pathCurvedLeft:pathCurvedRight),setTimeout(function(){currItem.path.stop().animate({path:pathRectangle},3*speed,mina.elastic)},.5*speed)},SliderFx.prototype._toggleNavControls=function(){switch(this.curr){case 0:classie.remove(this.navNext,"disabled"),classie.add(this.navPrev,"disabled");break;case this.itemsCount-1:classie.add(this.navNext,"disabled"),classie.remove(this.navPrev,"disabled");break;default:classie.remove(this.navNext,"disabled"),classie.remove(this.navPrev,"disabled")}},window.SliderFx=SliderFx}(window);