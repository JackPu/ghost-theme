!function($){"use strict";var animEndEventName={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"}[Modernizr.prefixed("animation")],onEndAnimation=function(el,callback){var onEndCallbackFn=function(ev){ev.target==this&&(this.removeEventListener(animEndEventName,onEndCallbackFn),callback&&"function"==typeof callback&&callback.call())};el.addEventListener(animEndEventName,onEndCallbackFn)},$document=$(document),containers=[].slice.call($(".slide")),containersCount=containers.length,current=0,isAnimating=!1,pageTriggers=[],isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);function navigate(pageTrigger){var oldcurrent=current,newcurrent=pageTriggers.indexOf(pageTrigger);if(!isAnimating&&oldcurrent!==newcurrent){isAnimating=!0;var currentPageTrigger=pageTriggers[current],nextContainer=containers[newcurrent],currentContainer=containers[current],dir=oldcurrent<newcurrent?"left":"right";$(currentPageTrigger).removeClass("active"),$(pageTrigger).addClass("active"),current=newcurrent,$(nextContainer).addClass("left"===dir?"slider--animInRight":"slider--animInLeft"),$(currentContainer).addClass("left"===dir?"slider--animOutLeft":"slider--animOutRight"),onEndAnimation(currentContainer,function(){$(currentContainer).removeClass("left"===dir?"slider--animOutLeft":"slider--animOutRight"),$(nextContainer).removeClass("left"===dir?"slider--animInRight":"slider--animInLeft"),$(currentContainer).removeClass("slider--current"),$(nextContainer).addClass("slider--current"),isAnimating=!1})}}$document.ready(function(){$(".menu-icon").on("click",function(e){$("body").toggleClass("open"),$(this).toggleClass("open")}),$("pre code").each(function(i,block){hljs.highlightBlock(block)}),function(){var thumbString="";if(containers.forEach(function(item,index){thumbString+='<a href="javascript:;" '+(0===index?'class="active" ':"")+"></a>"}),1<containers.length){var ctrlString="";isMobile||(ctrlString='<div class="ctrl"><a href="javascript:;" class="js-ctrl-left" ><svg class="icon icon-rewind"><use xlink:href="#icon-rewind"></use></svg></a><a href="javascript:;" class="js-ctrl-right icon-angle-right" ><svg class="icon icon-fast-forward"><use xlink:href="#icon-fast-forward"></use></svg></a></div>'),$("#slideshow").append([ctrlString,'<div class="thumb">',thumbString,"</div>"].join("")),$(".js-ctrl-left").on("click",function(){0<current&&navigate(pageTriggers[current-1])}),$(".js-ctrl-right").on("click",function(){current<containersCount-1&&navigate(pageTriggers[current+1])}),isMobile&&$("#slideshow").swipe({swipe:function(event,direction,distance,duration,fingerCount,fingerData){if("left"==direction)current<containersCount-1&&navigate(pageTriggers[current+1]);else if("right"==direction)0<current&&navigate(pageTriggers[current-1]);else if("down"==direction){var sT=$("html").scrollTop();0==sT?($("body").toggleClass("open"),$(".menu-icon").toggleClass("open")):$("html").animate({scrollTop:0},500)}else if("up"==direction)return!1},threshold:0,allowPageScroll:"vertical"})}pageTriggers=[].slice.call($(".thumb a")),$(containers[current]).addClass("slider--current")}(),function(){var targetEl=$("nav.pagination");if(0<targetEl.length){var str=$(".page-number").text().trim(),current=1*str.split(" ")[1],total=1*str.split(" ")[3],arr=uniqueArray([1,2,current,"...",total-1,total]),newHtml='<div class="pagination-new">';2<current&&(newHtml+='<a class="pagi-prev" href="/page/"'+(current-1)+'"><svg class="icon icon-chevron-left"><use xlink:href="#icon-chevron-left"></use></svg></a>');for(var i=0;i<arr.length;i++)if("number"==typeof arr[i]){var url="/page/"+arr[i];newHtml+='<a href="'+url+'"',arr[i]===current&&(newHtml+=' class="active"'),newHtml+=" >"+arr[i]+"</a>"}else newHtml+='<a disabled href="javascript:;">...</a>';current<total-1&&(newHtml+='<a class="pagi-prev" href="/page/"'+(current+1)+'"><svg class="icon icon-chevron-right"><use xlink:href="#icon-chevron-right"></use></svg></a>'),newHtml+="</div>",targetEl.hide(),$(".js-pagination").append(newHtml)}}()}),document.addEventListener("keydown",function(ev){var keyCode=ev.keyCode||ev.which,isNavOpen=$("body").hasClass("open");switch(keyCode){case 37:0<current&&!isNavOpen&&navigate(pageTriggers[current-1]);break;case 39:current<containersCount-1&&!isNavOpen&&navigate(pageTriggers[current+1])}});var uniqueArray=function(arrArg){return arrArg.filter(function(elem,pos,arr){return arr.indexOf(elem)==pos})}}(jQuery);